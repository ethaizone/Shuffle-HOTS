webpackJsonp([2,0],{0:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=a(35),o=n(r),s=a(117),i=n(s),l=a(115),u=n(l),d=a(62),f=n(d);o.default.use(i.default),o.default.directive("focus",{bind:function(){var t=this.el;o.default.nextTick(function(){t.focus()})}}),new o.default({el:"#app",template:"<App/>",store:f.default,components:{App:u.default}})},16:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CHANGE_MAP="CHANGE_MAP",e.CREATE_PLAYER="CREATE_PLAYER",e.UPDATE_PLAYER="UPDATE_PLAYER",e.DELETE_PLAYER="DELETE_PLAYER",e.CREATE_BOT="CREATE_BOT",e.DELETE_BOT="DELETE_BOT",e.ADD_PLAYER_TO_ROOM="ADD_PLAYER_TO_ROOM",e.REMOVE_PLAYER_FROM_ROOM="REMOVE_PLAYER_FROM_ROOM",e.SWAP_PLAYER="SWAP_PLAYER",e.SHUFFLE_PLAYER="SHUFFLE_PLAYER"},36:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(41),o=n(r),s=a(58),i=n(s),l=new i.default("shuffle-hots");e.default={saveData:function(t,e,a){return new o.default(function(e,a){try{e(l.save(t))}catch(t){a(t)}}).then(e).catch(a)},loadData:function(t,e){return new o.default(function(t,e){try{var a=l.load();null===a&&(a=[]),t(a)}catch(t){e(t)}}).then(t).catch(e)}}},37:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=[["Battlefield of Eternity",1,{bg_class:"map-battlefield-of-eternity"}],["Blackheart's Bay",1,{bg_class:"map-blackheart-bay"}],["Cursed Hollow",1,{bg_class:"map-cursed-hollow"}],["Dragon Shire",1,{bg_class:"map-dragon-shire"}],["Garden of Terror",1,{bg_class:"map-garden-of-terror"}],["Haunted Mines",1,{bg_class:"map-haunted-mine"}],["Infernal Shrines",1,{bg_class:"map-infernal-shrines"}],["Sky Temple",1,{bg_class:"map-sky-temple"}],["Tomb of the Spider Queen",1,{bg_class:"map-tomb-of-the-spider-queen"}],["Towers of Doom",1,{bg_class:"map-tower-of-doom"}]];e.default=a},38:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var a=[t,"=",(0,l.default)(e),"; expires=Thu, 01-Jan-2299 00:00:01 GMT; domain=.",window.location.host.toString(),"; path=/;"].join("");document.cookie=a}function o(t){var e=document.cookie.match(new RegExp(t+"=([^;]+)"));return e&&(e=JSON.parse(e[1])),e}function s(t){document.cookie=[t,"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.",window.location.host.toString()].join("")}Object.defineProperty(e,"__esModule",{value:!0}),e.swapArrayElements=e.deleteCookie=e.readCookie=e.bakeCookie=e.shuffle=void 0;var i=a(39),l=n(i),u=function(t){for(var e,a,n=t.length;0!==n;)a=Math.floor(Math.random()*n),n-=1,e=t[n],t[n]=t[a],t[a]=e;return t},d=function(t,e,a){var n=t[e];t[e]=t[a],t[a]=n};e.shuffle=u,e.bakeCookie=r,e.readCookie=o,e.deleteCookie=s,e.swapArrayElements=d},58:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(39),o=n(r),s=a(70),i=n(s),l=a(71),u=n(l),d=function(){function t(e){(0,i.default)(this,t),this.key=e}return(0,u.default)(t,[{key:"load",value:function(){var t=window.localStorage.getItem(this.key);return"string"==typeof t?JSON.parse(t):null}},{key:"save",value:function(t){return window.localStorage.setItem(this.key,(0,o.default)(t))}}]),t}();e.default=d},59:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(73),o=n(r),s=function(){function t(t){if(this.weights={},this.data={},this.length=0,this.hasData=!1,t="undefined"!=typeof t?t:[],!Array.isArray(t))throw new Error('Unknown object "'+t.toString()+'" passed to WeightedList constructor! (Expected array or nothing)');for(var e=0;e<t.length;e++)this.push(t[e])}function e(t,e,a){this.weight=t,this.value=e,this.total=a}function a(t){this.heap=[null];for(var a=0;a<t.length;a++){var n=t[a][1],r=t[a][0];this.heap.push(new e(n,r,n))}for(a=this.heap.length-1;a>1;a--)this.heap[a>>1].total+=this.heap[a].total}return t.prototype={push:function(t){var e,a,n;if(Array.isArray(t)){if(e=t[0],a=t[1],n=t[2],"undefined"==typeof e)throw new Error("In WeightedList.push([ ... ]), need at least two elements");if("undefined"==typeof a)throw new Error("In array passed to WeightedList.push([ ... ]), second element is undefined!")}else{if("object"!==("undefined"==typeof t?"undefined":(0,o.default)(t)))throw new Error('WeightedList.push() passed unknown type "'+("undefined"==typeof t?"undefined":(0,o.default)(t))+'", expected [key, weight] or {"key": k, "weight": w}');if(e=t.key,a=t.weight,n=t.data,"undefined"==typeof e)throw new Error("In WeightedList.push({ ... }), no {'key': 'xyzzy'} pair found");if("undefined"==typeof a)throw new Error("In array passed to WeightedList.push({ ... }), no {'weight': 42} pair found")}return this._push_values(e,a,n)},_push_values:function(t,e,a){if(this.weights[t])throw new Error("");if(("undefined"==typeof e?"undefined":(0,o.default)(e))!==(0,o.default)(1))throw new Error("Weight must be numeric (got "+e.toString()+")");if(e<=0)throw new Error("Weight must be >= 0 (got "+e+")");this.weights[t]=e,"undefined"!=typeof a&&(this.hasData=!0,this.data[t]=a),this.length++},addWeight:function(t,e){this.weights[t]+=e},peek:function(t,e){if("undefined"==typeof t&&(t=1),e=!!e,this.length-t<0)throw new Error("Stack underflow! Tried to retrieve "+t+" element"+(1===t?"":"s")+" from a list of "+this.length);for(var a=this._buildWeightedHeap(),n=[],r=0;r<t;r++){var o=a.pop();this.hasData?n.push({key:o,data:this.data[o]}):n.push(o),e&&(delete this.weights[o],delete this.data[o],this.length--)}return n},shuffle:function(){return this.peek(this.length)},pop:function(t){return this.peek(t,!0)},_buildWeightedHeap:function(){var t=[];for(var e in this.weights)this.weights.hasOwnProperty(e)&&t.push([e,this.weights[e]]);return new a(t)}},a.prototype={pop:function(){for(var t=this.heap[1].total*Math.random(),e=1;t>this.heap[e].weight;)t-=this.heap[e].weight,e<<=1,t>this.heap[e].total&&(t-=this.heap[e].total,e++);var a=this.heap[e].value,n=this.heap[e].weight;for(this.heap[e].weight=0;e>0;)this.heap[e].total-=n,e>>=1;return a}},t}();e.default=s},60:function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.swapPlayer=e.shuffleInLobby=e.movePlayerToPending=e.movePlayerToLobby=e.removeBotFromLobby=e.addBotToLobby=e.deletePlayer=e.addNewPlayer=e.shuffleMap=void 0;var o=a(41),s=r(o),i=a(16),l=n(i),u=a(37),d=r(u),f=a(59),h=r(f),c=a(36),p=r(c);e.shuffleMap=function(t){var e=t.commit,a=new h.default(d.default),n=a.peek();e(l.CHANGE_MAP,{className:n[0].data.bg_class,text:n[0].key})},e.addNewPlayer=function(t,e){var a=t.commit,n=t.state;return new s.default(function(t,r){for(var o in n.player.list){var s=n.player.list[o];if(s.name===e)return r()}a(l.CREATE_PLAYER,{name:e}),a(l.ADD_PLAYER_TO_ROOM,{name:e,room:"pending"});var i=[];for(var u in n.player.list){var d=n.player.list[u];"human"===d.data.type&&i.push(d.name)}return p.default.saveData(i,function(){},function(){}),t()})},e.deletePlayer=function(t,e){var a=t.commit,n=t.state;return new s.default(function(t,r){for(var o in n.room.lobby){var s=n.player.list[o];if(s.name===e)return r()}return a(l.REMOVE_PLAYER_FROM_ROOM,{name:e,room:"pending"}),a(l.DELETE_PLAYER,{name:e}),t()})},e.addBotToLobby=function(t){var e=t.commit,a=t.state;return new s.default(function(t,n){return a.player.hasBot?n():(e(l.CREATE_BOT),e(l.ADD_PLAYER_TO_ROOM,{name:"bot",room:"lobby"}),t())})},e.removeBotFromLobby=function(t){var e=t.commit,a=t.state;return new s.default(function(t,n){return a.player.hasBot===!1?n():(e(l.REMOVE_PLAYER_FROM_ROOM,{name:"bot",room:"lobby"}),e(l.DELETE_BOT),t())})},e.movePlayerToLobby=function(t,e){var a=t.commit,n=t.state,r=t.dispatch;n.player.hasBot&&(n.room.lobby.length+1)%2!==0&&r("removeBotFromLobby"),a(l.REMOVE_PLAYER_FROM_ROOM,{name:e,room:"pending"}),a(l.ADD_PLAYER_TO_ROOM,{name:e,room:"lobby"})},e.movePlayerToPending=function(t,e){var a=t.commit,n=t.state,r=t.dispatch;n.player.hasBot&&(n.room.lobby.length+1)%2!==0&&r("removeBotFromLobby"),a(l.REMOVE_PLAYER_FROM_ROOM,{name:e,room:"lobby"}),"bot"===e?a(l.DELETE_BOT):a(l.ADD_PLAYER_TO_ROOM,{name:e,room:"pending"})},e.shuffleInLobby=function(t,e){var a=t.commit,n=t.state,r=t.dispatch;n.room.lobby.length%2!==0&&r(n.player.hasBot===!1?"addBotToLobby":"removeBotFromLobby"),a(l.SHUFFLE_PLAYER,{room:"lobby"})},e.swapPlayer=function(t,e){var a=t.commit;t.state,t.dispatch;a(l.SWAP_PLAYER,e)}},61:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.playerInPending=function(t){return t.room.pending},e.playerInLobby=function(t){return t.room.lobby}},62:function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(35),s=r(o),i=a(57),l=r(i),u=a(60),d=n(u),f=a(61),h=n(f),c=a(63),p=r(c),y=a(65),b=r(y),_=a(64),m=r(_);s.default.use(l.default);var v=!1;e.default=new l.default.Store({actions:d,getters:h,modules:{map:p.default,room:b.default,player:m.default},strict:v})},63:function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(23),s=r(o),i=a(16),l=n(i),u={class:null,text:null},d=(0,s.default)({},l.CHANGE_MAP,function(t,e){var a=e.className,n=e.text;t.class=a,t.text=n});e.default={state:u,mutations:d}},64:function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,s=a(23),i=r(s),l=a(16),u=n(l),d={list:{},hasBot:!1,botName:"-- AI Elite --"},f=(o={},(0,i.default)(o,u.CREATE_PLAYER,function(t,e){var a=e.name;t.list[a]={name:a,data:{type:"human"}}}),(0,i.default)(o,u.UDPATE_PLAYER,function(t,e){var a=e.name,n=e.data;for(var r in t.list){var o=t.list[r];o.name===a&&(o.data=n)}}),(0,i.default)(o,u.DELETE_PLAYER,function(t,e){var a=e.name;for(var n in t.list){var r=t.list[n];r.name===a&&delete t.list[a]}}),(0,i.default)(o,u.CREATE_BOT,function(t){t.list.bot={name:t.botName,data:{type:"bot"}},t.hasBot=!0}),(0,i.default)(o,u.DELETE_BOT,function(t){delete t.list.bot,t.hasBot=!1}),o);e.default={state:d,mutations:f}},65:function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,s=a(23),i=r(s),l=a(16),u=n(l),d=a(38),f={lobby:[],pending:[]},h=(o={},(0,i.default)(o,u.ADD_PLAYER_TO_ROOM,function(t,e){var a=e.room,n=e.name;t[a].push(n)}),(0,i.default)(o,u.REMOVE_PLAYER_FROM_ROOM,function(t,e){var a=e.room,n=e.name;for(var r in t[a]){var o=t[a][r];o===n&&t[a].splice(r,1)}}),(0,i.default)(o,u.SHUFFLE_PLAYER,function(t,e){var a=e.room;(0,d.shuffle)(t[a]),t[a]=t[a].filter(function(){return!0})}),(0,i.default)(o,u.SWAP_PLAYER,function(t,e){var a,n,r=e.room,o=e.player1,s=e.player2;for(var i in t[r])t[r][i]===o&&(a=i),t[r][i]===s&&(n=i);console.log(a,n,o,s),(0,d.swapArrayElements)(t[r],a,n),t[r]=t[r].filter(function(){return!0})}),o);e.default={state:f,mutations:h}},66:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(72),o=n(r),s=a(35),i=n(s),l=a(57),u=a(38),d=a(36),f=n(d),h=a(37),c=n(h),p={showAddPlayer:!1,newPlayer:null,lobbyAttrs:[],luckyPlayer:null,mapPreloader:[]};e.default={data:function(){return p},name:"app",created:function(){var t=this;f.default.loadData(function(e){for(var a in e)t.$store.dispatch("addNewPlayer",e[a])},function(){});for(var e in c.default)this.mapPreloader.push(c.default[e][2].bg_class)},computed:(0,o.default)({totalPlayerInLobbyText:function(){return this.playerInLobby.length+" "+(this.playerInLobby.length>1?"Players":"Player")},totalPlayerInPendingText:function(){return this.playerInPending.length+" "+(this.playerInPending.length>1?"Players":"Player")},mapClass:function(){return this.$store.state.map.class},mapName:function(){return this.$store.state.map.text}},(0,l.mapGetters)(["playerInPending","playerInLobby"])),methods:{openAddPlayer:function(){this.showAddPlayer=!0;var t=this;i.default.nextTick(function(){t.$refs.addPlayerInput.focus()})},preFillLobbyAttrs:function(){for(var t=this.playerInLobby.length+1,e=this.lobbyAttrs.length;e<t;e++)this.lobbyAttrs[e]={class:""}},shuffleMap:function(){this.$store.dispatch("shuffleMap")},movePlayerToLobby:function(t){this.preFillLobbyAttrs(),this.$store.dispatch("movePlayerToLobby",t),this.updateLobbyAttr(!1)},movePlayerToPending:function(t){this.$store.dispatch("movePlayerToPending",t),this.updateLobbyAttr(!1)},kickAllFromLobby:function(t){for(;this.$store.state.room.lobby.length;){var e=this.$store.state.room.lobby.length-1;this.$store.dispatch("movePlayerToPending",this.playerInLobby[e])}this.updateLobbyAttr(!1)},addPlayer:function(){var t=this;return this.newPlayer?"bot"===this.newPlayer||this.newPlayer===this.$store.state.player.botName?(window.alert("This name reserve for bot. Please use another name."),this.newPlayer="",void this.openAddPlayer()):(this.$store.dispatch("addNewPlayer",this.newPlayer).then(function(){t.showAddPlayer=!1}).catch(function(){window.alert("This player is exists. Please add another name")}),void(this.newPlayer="")):void(this.showAddPlayer=!1)},deletePlayer:function(t){window.confirm('Do you want to delete "'+t.target.innerText+'"? ')&&this.$store.dispatch("deletePlayer",t.target.innerText)},updateLobbyAttr:function(t){if(t===!0){var e=[0,1];(0,u.shuffle)(e);for(var a in this.playerInLobby)a<this.playerInLobby.length/2?1===e[0]?this.lobbyAttrs[a].class="team_red":this.lobbyAttrs[a].class="team_blue":1===e[0]?this.lobbyAttrs[a].class="team_blue":this.lobbyAttrs[a].class="team_red"}else{for(var n in this.playerInLobby)this.lobbyAttrs[n].class="";this.luckyPlayer=null}this.lobbyAttrs=this.lobbyAttrs.filter(function(){return!0})},shuffle:function(){this.$store.state.player.hasBot===!1&&this.playerInLobby.length%2!==0&&this.preFillLobbyAttrs(),this.$store.dispatch("shuffleInLobby"),this.updateLobbyAttr(!0),this.shuffleMap()},swapWithBot:function(){this.luckyPlayer=null;var t;for(var e in this.playerInLobby)"bot"===this.playerInLobby[e]&&(t=this.playerInLobby.length/2>e?"A":"B");var a=[];for(var n in this.playerInLobby)a.push(this.playerInLobby[n]);var r;r="A"===t?a.splice(a.length/2,a.length/2):a.splice(0,a.length/2),(0,u.shuffle)(r);var o=r.splice(0,1);this.luckyPlayer=o[0],this.$store.dispatch("swapPlayer",{room:"lobby",player1:"bot",player2:this.luckyPlayer})}},components:{}}},113:function(t,e){},115:function(t,e,a){var n,r;a(113),n=a(66);var o=a(116);r=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(r=n=n.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=n},116:function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"container-fluid map-bg",class:mapClass},[_h("div",{staticClass:"row"},[_h("div",{staticClass:"col-sm-6 col-sm-offset-3 col-lg-4 col-lg-offset-4 inner-container"},[_h("div",{staticClass:"mapping noselect pointer"},[_h("h1",{attrs:{id:"map"}},[_s(mapName)])])," ",_h("div",{staticClass:"player-list"},[_h("h5",{staticClass:"heading"},["\n          Lobby\n          ",_h("span",{staticClass:"pull-right",attrs:{id:"span_player_in_lobby"}},["\n            "+_s(totalPlayerInLobbyText)+"\n          "])])," ",_h("ul",{staticClass:"list-group",attrs:{id:"ul_lobby_room"}},[_l(playerInLobby,function(t,e){return _h("li",{staticClass:"list-group-item player",class:lobbyAttrs[e].class,on:{click:function(e){e.target===e.currentTarget&&movePlayerToPending(t)}}},["\n            "+_s($store.state.player.list[t].name)+"\n            ",$store.state.player.list[t].name===luckyPlayer?_h("span",{staticClass:"glyphicon glyphicon-star",attrs:{style:"margin-left: 5px; color:orange; text-shadow:none;",title:"You are lucky player!"}}):_e()])})])," ",_h("h5",{staticClass:"heading"},["Players\n\n          ",_h("span",{staticClass:"pull-right",attrs:{id:"span_player_in_lobby"}},["\n            "+_s(totalPlayerInPendingText)+"\n          "])])," ",_h("ul",{staticClass:"list-group",attrs:{id:"ul_pending",style:"margin-bottom: 0px;"}},[_l(playerInPending,function(t){return _h("li",{directives:[{name:"touch",rawName:"v-touch:press",value:deletePlayer,expression:"deletePlayer",arg:"press"}],staticClass:"list-group-item player",on:{click:function(e){e.target===e.currentTarget&&movePlayerToLobby(t)}}},[_s($store.state.player.list[t].name)])})])," ",_h("ul",{staticClass:"list-group"},[showAddPlayer?_e():_h("li",{staticClass:"list-group-item add-player",on:{click:function(t){t.target===t.currentTarget&&openAddPlayer(t)}}},["\n            Add Player ...\n          "])," ",showAddPlayer?_h("li",{staticClass:"list-group-item add-player-form"},[_h("div",{staticClass:"input-group"},[_h("input",{directives:[{name:"model",rawName:"v-model",value:newPlayer,expression:"newPlayer"}],ref:"addPlayerInput",staticClass:"form-control",attrs:{type:"text",placeholder:"Player Name"},domProps:{value:_s(newPlayer)},on:{keydown:function(t){13===t.keyCode&&addPlayer(t)},input:function(t){t.target.composing||(newPlayer=t.target.value)}}})," ",_h("div",{staticClass:"input-group-btn"},[_h("button",{staticClass:"btn btn-default",on:{click:addPlayer}},[this.newPlayer?_h("span",["Add"]):_e()," ",this.newPlayer?_e():_h("span",["Close"])])])])]):_e()])," ",_h("button",{staticClass:"btn btn-primary btn-block btn-lg",attrs:{id:"shuffle",disabled:$store.state.room.lobby.length<1},on:{click:shuffle}},["\n          Shuffle\n        "])," ",_h("button",{staticClass:"btn btn-default btn-block",attrs:{id:"swap_to_bot",disabled:$store.state.player.hasBot===!1},on:{click:swapWithBot}},["\n          Swap AI Player\n        "])," ",_m(0)])," ",_h("div",{staticClass:"row"},[_h("div",{staticClass:"col-sm-6"},[_h("button",{staticClass:"btn btn-default btn-block",attrs:{id:"reset",disabled:$store.state.room.lobby.length<1},on:{click:kickAllFromLobby}},["Clear Lobby"])])," ",_h("div",{staticClass:"col-sm-6"},[_h("button",{staticClass:"btn btn-default btn-block",on:{click:shuffleMap}},["Random Battleground"])])])])," "])," "," ",_h("div",{attrs:{style:"width:1px;height: 1px;overflow: hidden;opacity: 0;",id:"preloader"}},[_m(1)," ",_l(mapPreloader,function(t){return _h("div",{staticClass:"map-bg",class:t})})])])},staticRenderFns:[function(){with(this)return _h("p",{staticClass:"help-block text-center"},[_h("i",{staticClass:"glyphicon glyphicon-info-sign"})," Press and hold on player name to delete"])},function(){with(this)return _h("span",{staticClass:"glyphicon glyphicon-star"})}]}}});
//# sourceMappingURL=app.411d3c059eca6d573df6.js.map